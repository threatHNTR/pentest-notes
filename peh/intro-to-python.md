# Python Basics

## File Structure and Execution

* Python programs start with a shebang and can be executed using `python3 filename.py` or `./filename.py` (after granting executable permission).

## Interactive Editing and Running

* To edit and run Python code simultaneously, you can use `vim filename.py&` in the shell.

## Variables and Methods

* Python variables hold data, and methods perform actions on that data.

```python
#!/bin/python3

quote = "Be based, not cringe"
print(quote)
print(quote.upper())  # Uppercase
print(quote.title())  # Title case
print(len(quote))  # Length

name = "Bruh"
age = 69
print("My name is " + name + " and I am " + str(age) + " years old.")  # Convert int to string

age += 1
print(age)
```

## Functions

* Functions in Python allow you to encapsulate reusable pieces of code.

```python
#!/bin/python3

name = "Bruh"
age = 25
gpa = 8.2

# Example of a function
def whoami():
    name = "Deez"
    age = 12
    print("My name is " + name + " and I am " + str(age) + " years old.")

whoami()  # Call the function

# Parameters in function
def hundred(n):
    print(n + 100)

hundred(15)

# Many parameters
def add(x, y):
    print(x + y)

add(400, 35)

# Return value
def multiply(x, y):
    return x * y

print(multiply(3, 2))
```

## Boolean Expressions

* Boolean expressions evaluate to either True or False, enabling logical operations.

```python
#!/bin/python3

bool1 = True
bool2 = 3 + 3 == 9
bool3 = 3 * 3 == 9
bool4 = bool1 == bool2
bool5 = bool1 == bool3

print(bool1, bool2, bool3, bool4, bool5)
# True False True False True
```

## Conditional Statements

* Conditional statements in Python allow for decision-making based on specified conditions.

```python
#!/bin/python3

def drink(age, money):
    if age >= 21 and money >= 2:
        return "Purchased drink"
    elif age >= 21 and money < 2:
        return "Need more money"
    elif age < 21 and money >= 2:
        return "Too young"
    else:
        return "Young and poor"

print(drink(22, 4))
print(drink(22, 1))
print(drink(12, 5))
print(drink(15, 1))
```

## Lists

* Lists in Python store collections of items, which can be accessed and manipulated.

```python
#!/bin/python3

players = ['Eddard', 'Jon', 'Dany', 'Sansa']

print(players[0])  # First item, index 0
print(players[1:3])  # From index 1, up to before index 3 (excluding)
print(players[1:])  # From index 1 to end of list
print(players[:2])  # From start of list, up to index 2 (excluding)
print(players[-1])  # Last item, index -1

print(len(players))  # Number of items in list
players.append('Bran')  # Add item at end of list
print(players)
players.pop()  # Remove item from end of list
print(players)

players.pop(2)  # Remove item at index 2
print(players)
```

## Tuples

* Tuples are similar to lists but are immutable, meaning their elements cannot be changed after creation.

```python
#!/bin/python3

grades = ('S', 'A', 'B', 'C', 'F')
# Tuples are immutable
print(grades[1])
```

## Looping

* Looping constructs like for and while loops enable iteration over sequences or execution until a condition is met.

```python
#!/bin/python3

import sys  # System function, parameters
from datetime import datetime as dt  # Import module as alias

print(sys.version)
print(dt.now())
```

## Importing Modules

* Python's modular system allows importing external functionality for use in your code.

```python
#!/bin/python3

import sys  # System function, parameters
from datetime import datetime as dt  # Import module as alias

print(sys.version)
print(dt.now())
```

## String Functions

* String manipulation functions enable operations like splitting, joining, and formatting strings.

```python
#!/bin/python3

snt = "This is a sample sentence."

snt_parts = snt.split()  # Splits string based on delimiter, space by default
snt_joined = ' '.join(snt_parts)  # List of words are joined with delimiter separating words

print(snt_parts)
print(snt_joined)

quotes = "This contains \"quotes\""  # Backslash used as escape character
print(quotes)

spaces = "  space   bar  "
print(spaces.strip())  # Strips all space characters from string

print('A' in "Apple")
print("a" in 'Apple')
print("a".lower() in "Apple".lower())

fav = "Cake"
print("I like {}".format(fav))  # String format
```

## Dictionaries

* Dictionaries store key-value pairs and offer efficient data retrieval based on keys.

```python
#!/bin/python3

counts = {"A": 10, "B": 8, "C": 9, "S": 20}  # Key-value pairs
print(counts)

fruits = {"Best": ["Mango", "Banana"], "OK": ["Orange", "Apple"], "Bad": ["Berries", "Pineapple"]}
print(fruits)

# Add new key-value pair
fruits["Very bad"] = ["Tomato"]
print(fruits)

# Another way to add a pair
fruits.update({"Good": ["Jackfruit", "Grapes"]})
print(fruits)

# Updating value
counts["C"] = 3
print(counts)

# Returns value of key "C"
print(counts.get("C"))
```

## Sockets

* Python's socket module facilitates network communication, enabling connections to ports.

```python
#!/bin/python3

import socket
# Sockets are used to connect to ports

HOST = '127.0.0.1'  # localhost
PORT = 7777

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
# Used to establish connection
# Run command "nc -nvlp 7777" to initiate connection, this script will establish it
```

## Port Scanner Script

* A Python script can be written to scan ports on a specified target, helping to identify open ports.

```python
#!/bin/python3

import sys
import socket
from datetime import datetime

# Define target IP
if len(sys.argv) == 2:
    target = socket.gethostbyname(sys.argv[1])  # Translate hostname to IPv4
else:
    print("Invalid input")
    print("Syntax: python3 scanner.py <ip>")

# Print banner
print("-" * 50)
print("Scanning target: " + target)
print("Time started: " + str(datetime.now()))
print("-" * 50)

# Trying to connect to the target
try:
    for port in range(1, 500):
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        socket.setdefaulttimeout(1)  # Socket timeout after 1 second to avoid infinite waiting time
        result = s.connect_ex((target, port))  # Returns error indicator
        if result == 0:
            print("Port {} is open".format(port))
        s.close()

# Exceptions in case of errors
except KeyboardInterrupt:  # Ctrl+C, Ctrl+Z
    print("\nExiting program.")
    sys.exit()  # Exits program

except socket.gaierror:
    print("\nHostname could not be resolved.")
    sys.exit()

except socket.error:
    print("\nCould not connect to server.")
    sys.exit()
```
